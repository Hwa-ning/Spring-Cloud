# Spring Cloud Config
## config와 코드의 분리
- 코드에서 하드코딩된 구성정보(config)를 사용하지 않아야한다. 이 원칙을 무시하면 구성정보가 변경될 때마다 어플리케이션을 재컴파일하고 재배포해야하여 애플리케이션이 복잡해진다.

- 만약 수백개의 마이크로서비스가 존재하고 각 마이크로 서비스에서 local,dev,prd와 같이 환경에 대한 서로 다른 환경 구성이 포함되어 있다면 이 경우 다음 사항을 고려해야만 할 것이다.
  - 배포되는 실제 코드와 config를 완전히 분리한다.
  - 여러 환경에서도 절대 변경되지 않는 불변 애플리케이션 이미지를 빌드한다.
  - 서버가 시작될 때 마이크로서비스가 읽어오는 환경 변수 또는 중앙 저장소를 통해 모든 애플리케이션의 구성 정보를 주입한다.

### 애플리케이션 구성 관리 원칙
- 분리 : 서비스의 물리적 배포에서 config 정보를 완전히 분리한다. 실제로 config 정보는 서비스 인스턴스와 함께 배포되어서는 안되며, 환경 변수 or 중앙 저장소에서 읽어오는 방식을 사용한다.
- 추상화 : 구성 데이터의 접근 방식을 추상화한다. 서비스 저장소(파일 기반 or JDBC DB 기반)보다는 REST기반 JSON을 사용한다. 
- 중앙 집중화 : 여러 저장소 수를 최소화하는 것이 중요함. 가능한 적은 수의 저장소로 애플리케이션 구성 정보를 모음
- 견고화 : config와 배포되는 서비스는 완전히 분리되고 중앙 집중화  되므로 사용하고 구현할 솔루션은 가용성이 높고 이중화가 필요함.